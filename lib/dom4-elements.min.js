(function(){var arrayPrototype=Array.prototype;if(typeof Document==="undefined"||!("map"in arrayPrototype)||!("reduce"in arrayPrototype)||!("querySelectorAll"in document)){return}var push_uniq=function(a,b){for(var i=0,mx=b.length;i<mx;++i){var item=b[i];if(a.indexOf(item)===-1){a.push(item)}}return a};var query=function query(selector){return this.querySelector(selector)};var queryAll=function queryAll(selector){var matches=this.querySelectorAll(selector);var elements=push_uniq(new Elements,matches);return elements};["Document","DocumentFragment","Element"].forEach(function(ParentNode){if(!(ParentNode in this)){return}var prototype=this[ParentNode].prototype;if(!("query"in prototype)){prototype.query=query}if(!("queryAll"in prototype)){prototype.queryAll=queryAll}});if(!("Elements"in this)){function Elements(){}var elementsPrototype=Elements.prototype=new Array;elementsPrototype.queryAll=function(selector){var mapped=this.map(function(el){return el.queryAll(selector)});var reduced=mapped.reduce(push_uniq,new Elements);return reduced};elementsPrototype.query=function(selector){return this.queryAll(selector)[0]};this.Elements=Elements}})();